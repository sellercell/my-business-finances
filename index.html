<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интерактивный Финансовый Помощник</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutral Harmony -->
    <!-- Application Structure Plan: The application is structured as a tab-based single-page application (SPA). This design was chosen to break down the dense financial guide into manageable, thematic sections: "Главная" (Introduction), "Пульс Бизнеса: ДДС" (Cash Flow), "Карта Эффективности: ОПиУ" (P&L), "Финансовый Компас: Аналитика" (Analytics), and "Дорожная Карта" (Roadmap). This non-linear structure enhances usability by allowing users to focus on specific topics of interest or follow a logical learning path from basic concepts to practical implementation. Key interactions include tab navigation to switch content, interactive charts to visualize data, and expandable sections (accordion for roadmap, click-to-reveal for KPIs) to reveal detailed information progressively, preventing cognitive overload and encouraging exploration. -->
    <!-- Visualization & Content Choices: 
    - Section "ДДС": Goal: Inform & Compare. Method: Bar chart (Chart.js) to show cash flow dynamics (receipts, expenses, net flow). Interaction: Users can toggle datasets visibility via dedicated buttons. Justification: A chart provides a much quicker understanding of cash flow trends than a table, and toggles allow focused analysis of specific components.
    - Section "ОПиУ": Goal: Explain Relationships. Method: A visual diagram built with HTML/Tailwind to show the step-by-step calculation from Revenue to Net Profit. Justification: This visual flow is more intuitive for understanding the structure of a P&L statement than a simple list.
    - Section "Аналитика": Goal: Inform & Define. Method: Donut chart for the Balance Sheet equation and interactive cards for KPIs. Interaction: Clicking KPI cards toggles a detailed description. Justification: Cards organize KPIs neatly, a donut chart visually represents the fundamental accounting equation, and click-to-reveal details provide depth on demand.
    - Section "Дорожная Карта": Goal: Guide & Organize. Method: An interactive accordion/checklist. Interaction: Clicking a step expands it to show details. Justification: This makes the implementation plan feel less daunting and more like an actionable, step-by-step guide. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        .tab-content.active {
            display: block;
        }
        .nav-button {
            transition: all 0.3s ease;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); /* Subtle shadow */
        }
        .nav-button:hover {
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .nav-button.active {
            background-color: #3b82f6;
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .kpi-card-detail {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem; /* leading-5 */
            color: #475569; /* slate-600 */
        }
        .kpi-card.active .kpi-card-detail {
            max-height: 100px; /* Sufficient height for content */
        }
        /* Updated styles for roadmap section */
        .accordion-header {
            display: grid; /* Use grid for layout */
            grid-template-columns: auto 1fr auto; /* Number | Text | Arrow */
            align-items: center;
            gap: 1rem; /* Gap between number, text, and arrow */
            padding: 1rem; /* Base padding for the button */
            position: relative; /* Keep relative for arrow transform */
        }
        .step-number {
            width: 2.25rem; /* w-9 */
            height: 2.25rem; /* h-9 */
            border-radius: 9999px; /* rounded-full */
            background-color: #3b82f6; /* blue-500 */
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700; /* font-bold */
            font-size: 0.875rem; /* text-sm */
            box-shadow: 0 2px 4px -1px rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.06);
            /* Removed absolute positioning */
        }
        .accordion-item.active .step-number {
            background-color: #2563eb; /* blue-600 */
        }
        .accordion-item.active .accordion-header {
            background-color: #e0f2fe; /* blue-50 */
        }
        .accordion-content ul li::before {
            content: '✓'; /* Checkmark icon */
            color: #10b981; /* emerald-500 */
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">Интерактивный Финансовый Помощник</h1>
            <p class="text-slate-600 mt-2">Ваш навигатор в мире финансов бизнеса: от ДДС до стратегической аналитики.</p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
            <button data-target="home" class="nav-button active py-2 px-4 bg-white rounded-lg">Главная</button>
            <button data-target="dds" class="nav-button py-2 px-4 bg-white rounded-lg">Пульс Бизнеса: ДДС</button>
            <button data-target="pnl" class="nav-button py-2 px-4 bg-white rounded-lg">Карта Эффективности: ОПиУ</button>
            <button data-target="analytics" class="nav-button py-2 px-4 bg-white rounded-lg">Финансовый Компас: Аналитика</button>
            <button data-target="roadmap" class="nav-button py-2 px-4 bg-white rounded-lg">Дорожная Карта</button>
        </nav>

        <main>
            <!-- Home Section -->
            <div id="home" class="tab-content active">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold mb-4 text-slate-900">Добро пожаловать!</h2>
                    <p class="mb-4 text-slate-700">Внедрение системы учета ДДС и прибыльности — это фундаментальный шаг для построения здорового и масштабируемого бизнеса. Этот интерактивный помощник поможет вам разобраться в ключевых финансовых отчетах, понять их взаимосвязь и покажет практические шаги для внедрения системы в вашей компании.</p>
                    <p class="text-slate-700">Используйте навигацию выше, чтобы переключаться между разделами. Вы можете изучать темы последовательно или сразу перейти к наиболее интересующему вас вопросу. Наша цель — превратить сложную финансовую теорию в понятный и применимый на практике инструмент.</p>
                    <p class="mt-6 text-center text-slate-700">
                        Присоединяйтесь к нашему Telegram-каналу для еще больше полезной информации и советов: 
                        <a href="https://t.me/BizTaxes" target="_blank" class="text-blue-600 hover:underline font-semibold">@BizTaxes</a>
                    </p>
                </div>
            </div>

            <!-- DDS Section -->
            <div id="dds" class="tab-content">
                 <div class="bg-white p-6 md:p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold mb-2 text-slate-900">Пульс Бизнеса: Отчет о Движении Денежных Средств (ДДС)</h2>
                    <p class="mb-6 text-slate-600">ДДС — это ваш индикатор ликвидности. Он показывает, сколько РЕАЛЬНЫХ денег пришло и ушло, и отвечает на вопрос: "Куда делись деньги?". Ниже представлен интерактивный пример, демонстрирующий динамику денежных потоков.</p>
                    <div class="chart-container mb-4">
                        <canvas id="ddsChart"></canvas>
                    </div>
                    <div class="flex flex-wrap justify-center gap-2 mb-6">
                        <button data-dataset="0" class="toggle-dataset-button py-1 px-3 text-sm bg-green-100 text-green-700 rounded-full hover:bg-green-200 active">Поступления</button>
                        <button data-dataset="1" class="toggle-dataset-button py-1 px-3 text-sm bg-red-100 text-red-700 rounded-full hover:bg-red-200 active">Расходы</button>
                        <button data-dataset="2" class="toggle-dataset-button py-1 px-3 text-sm bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 active">Чистый поток</button>
                    </div>
                    <div class="grid md:grid-cols-3 gap-6 text-center">
                        <div class="bg-slate-100 p-4 rounded-lg">
                            <h3 class="font-bold text-lg text-green-600">✅ Операционная деятельность</h3>
                            <p class="text-sm text-slate-600">Деньги от основной работы: продажи, оплата поставщикам, зарплаты, аренда. Показывает, зарабатывает ли ваш бизнес.</p>
                        </div>
                        <div class="bg-slate-100 p-4 rounded-lg">
                            <h3 class="font-bold text-lg text-blue-600">💡 Инвестиционная деятельность</h3>
                            <p class="text-sm text-slate-600">Вложения в будущее: покупка или продажа оборудования, недвижимости. Показывает, как вы развиваетесь.</p>
                        </div>
                        <div class="bg-slate-100 p-4 rounded-lg">
                            <h3 class="font-bold text-lg text-purple-600">💰 Финансовая деятельность</h3>
                            <p class="text-sm text-slate-600">Деньги со стороны: получение и выплата кредитов, взносы учредителей. Показывает, как вы привлекаете капитал.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- P&L Section -->
            <div id="pnl" class="tab-content">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold mb-2 text-slate-900">Карта Эффективности: Отчет о Прибылях и Убытках (ОПиУ)</h2>
                    <p class="mb-6 text-slate-600">ОПиУ (или P&L) показывает, насколько эффективно сработал ваш бизнес за период, и отвечает на вопрос: "Сколько мы заработали?". В отличие от ДДС, он учитывает доходы и расходы по методу начисления, а не по факту оплаты. Давайте проследим путь от выручки до чистой прибыли.</p>
                    
                    <div class="space-y-4">
                        <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                            <h3 class="font-bold text-blue-800">1. Выручка</h3>
                            <p class="text-sm text-slate-700">Общая сумма, на которую вы продали товаров или оказали услуг (неважно, оплатили их уже или нет).</p>
                        </div>
                        <div class="flex justify-center text-slate-400">⬇️</div>
                        <div class="p-4 bg-teal-50 border-l-4 border-teal-500 rounded-r-lg">
                             <p class="text-sm text-slate-700"><span class="font-bold">Минус:</span> Себестоимость (COGS)</p>
                        </div>
                        <div class="flex justify-center text-slate-400">⬇️</div>
                        <div class="p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                            <h3 class="font-bold text-green-800">2. Валовая прибыль</h3>
                            <p class="text-sm text-slate-700">Прибыль от основной деятельности до вычета общих расходов. Показывает маржинальность продукта.</p>
                        </div>
                        <div class="flex justify-center text-slate-400">⬇️</div>
                         <div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-r-lg">
                             <p class="text-sm text-slate-700"><span class="font-bold">Минус:</span> Операционные расходы (аренда, маркетинг, зарплаты адм. персонала)</p>
                        </div>
                        <div class="flex justify-center text-slate-400">⬇️</div>
                         <div class="p-4 bg-purple-50 border-l-4 border-purple-500 rounded-r-lg">
                            <h3 class="font-bold text-purple-800">3. Операционная прибыль (EBIT)</h3>
                            <p class="text-sm text-slate-700">Прибыль от основной деятельности бизнеса. Ключевой показатель эффективности операций.</p>
                        </div>
                         <div class="flex justify-center text-slate-400">⬇️</div>
                         <div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg">
                            <p class="text-sm text-slate-700"><span class="font-bold">Минус:</span> Проценты по кредитам и Налоги</p>
                        </div>
                         <div class="flex justify-center text-slate-400">⬇️</div>
                         <div class="p-6 bg-emerald-100 border-l-4 border-emerald-600 rounded-r-lg text-center">
                            <h3 class="font-bold text-xl text-emerald-900">� 4. Чистая прибыль</h3>
                            <p class="text-slate-800">Итоговый финансовый результат. То, что остается в распоряжении собственников.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analytics" class="tab-content">
                 <div class="bg-white p-6 md:p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold mb-6 text-slate-900">Финансовый Компас: Аналитика и KPI</h2>
                    <p class="mb-6 text-slate-600">Чтобы управлять бизнесом, его нужно измерять. Отчеты — это хорошо, но ключевые показатели (KPI) и понимание структуры Баланса дают полную картину финансового здоровья. Это ваш компас для принятия стратегических решений.</p>
                     <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                             <h3 class="text-xl font-bold mb-4 text-center text-slate-800">Структура Баланса</h3>
                             <div class="chart-container">
                                <canvas id="balanceChart"></canvas>
                             </div>
                             <p class="text-center mt-4 text-sm text-slate-600">Фундаментальное уравнение: <span class="font-semibold">Активы = Обязательства + Капитал</span>. Баланс показывает, чем владеет компания и за чей счет это профинансировано.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold mb-4 text-center text-slate-800">Ключевые показатели (KPI)</h3>
                            <div class="space-y-3">
                                <div class="kpi-card p-3 bg-slate-100 rounded-lg cursor-pointer hover:bg-slate-200 transition-colors">
                                    <h4 class="font-semibold">Рентабельность продаж (ROS)</h4>
                                    <div class="kpi-card-detail pt-1">
                                        <p>Показывает, сколько копеек чистой прибыли вы получаете с каждого рубля выручки. <span class="font-medium">Формула: Чистая прибыль / Выручка.</span></p>
                                    </div>
                                </div>
                                <div class="kpi-card p-3 bg-slate-100 rounded-lg cursor-pointer hover:bg-slate-200 transition-colors">
                                    <h4 class="font-semibold">Рентабельность активов (ROA)</h4>
                                    <div class="kpi-card-detail pt-1">
                                        <p>Оценивает, насколько эффективно вы используете свои активы для генерации прибыли. <span class="font-medium">Формула: Чистая прибыль / Средняя стоимость активов.</span></p>
                                    </div>
                                </div>
                                <div class="kpi-card p-3 bg-slate-100 rounded-lg cursor-pointer hover:bg-slate-200 transition-colors">
                                    <h4 class="font-semibold">Рентабельность капитала (ROE)</h4>
                                    <div class="kpi-card-detail pt-1">
                                        <p>Показывает, какую отдачу получают собственники на вложенный капитал. <span class="font-medium">Формула: Чистая прибыль / Средний собственный капитал.</span></p>
                                    </div>
                                </div>
                                 <div class="kpi-card p-3 bg-slate-100 rounded-lg cursor-pointer hover:bg-slate-200 transition-colors">
                                    <h4 class="font-semibold">Коэффициент ликвидности</h4>
                                    <div class="kpi-card-detail pt-1">
                                        <p>Отражает способность компании покрывать свои краткосрочные долги. <span class="font-medium">Формула: Оборотные активы / Краткосрочные обязательства.</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>

            <!-- Roadmap Section -->
            <div id="roadmap" class="tab-content">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold mb-4 text-slate-900">Дорожная Карта Внедрения</h2>
                    <p class="mb-6 text-slate-600">Внедрение финансового учета — это марафон, а не спринт. Следуйте этому пошаговому плану, чтобы процесс прошел гладко и эффективно. Нажмите на любой шаг, чтобы увидеть подробности.</p>
                    <div class="space-y-3 accordion-container">
                        <div class="accordion-item border border-slate-200 rounded-lg overflow-hidden">
                            <button class="accordion-header w-full text-left p-4 font-semibold bg-slate-100 hover:bg-slate-200 rounded-t-lg transition-colors duration-300">
                                <span class="step-number">1</span>
                                <span class="flex-1 text-slate-800">Шаг 1: Разделение финансов (Немедленно!)</span>
                                <span class="transform transition-transform duration-300 text-slate-500">▼</span>
                            </button>
                            <div class="accordion-content px-4 pb-4 bg-white">
                                <p class="text-slate-700 pt-2">Это абсолютная основа. Откройте отдельный банковский счет для бизнеса и прекратите смешивать личные и бизнес-транзакции. Без этого шага любой учет будет неточным и бессмысленным.</p>
                            </div>
                        </div>
                        <div class="accordion-item border border-slate-200 rounded-lg overflow-hidden">
                            <button class="accordion-header w-full text-left p-4 font-semibold bg-slate-100 hover:bg-slate-200 rounded-t-lg transition-colors duration-300">
                                <span class="step-number">2</span>
                                <span class="flex-1 text-slate-800">Шаг 2: Базовый учет ДДС (Первые 1-2 недели)</span>
                                <span class="transform transition-transform duration-300 text-slate-500">▼</span>
                            </button>
                            <div class="accordion-content px-4 pb-4 bg-white">
                                <ul class="list-none text-slate-700 pt-2 space-y-1">
                                    <li>✓ Выберите простой инструмент: Excel/Google Sheets.</li>
                                    <li>✓ Ежедневно или еженедельно фиксируйте ВСЕ поступления и расходы.</li>
                                    <li>✓ Используйте 5-7 простых категорий (Доход, Закупки, Зарплата, Аренда, Маркетинг).</li>
                                    <li>✓ Регулярно (раз в неделю) сверяйте данные с банковской выпиской.</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion-item border border-slate-200 rounded-lg overflow-hidden">
                            <button class="accordion-header w-full text-left p-4 font-semibold bg-slate-100 hover:bg-slate-200 rounded-t-lg transition-colors duration-300">
                                <span class="step-number">3</span>
                                <span class="flex-1 text-slate-800">Шаг 3: Детализация ДДС и внедрение ОПиУ (2-4 недели)</span>
                                <span class="transform transition-transform duration-300 text-slate-500">▼</span>
                            </button>
                            <div class="accordion-content px-4 pb-4 bg-white">
                               <ul class="list-none text-slate-700 pt-2 space-y-1">
                                    <li>✓ Расширьте категории ДДС до полной структуры (операционная, инвестиционная, финансовая).</li>
                                    <li>✓ Начните вести учет ОПиУ по методу начисления. Это сложнее, но критично для понимания прибыли.</li>
                                    <li>✓ Если используете ПО, настройте автоматический импорт банковских выписок.</li>
                                </ul>
                            </div>
                        </div>
                         <div class="accordion-item border border-slate-200 rounded-lg overflow-hidden">
                            <button class="accordion-header w-full text-left p-4 font-semibold bg-slate-100 hover:bg-slate-200 rounded-t-lg transition-colors duration-300">
                                <span class="step-number">4</span>
                                <span class="flex-1 text-slate-800">Шаг 4: Аналитика и прогнозирование (1-2 месяца)</span>
                                <span class="transform transition-transform duration-300 text-slate-500">▼</span>
                            </button>
                            <div class="accordion-content px-4 pb-4 bg-white">
                               <ul class="list-none text-slate-700 pt-2 space-y-1">
                                    <li>✓ Начните строить Баланс (хотя бы в упрощенной форме).</li>
                                    <li>✓ Освойте прогнозирование денежных потоков на 1-3 месяца вперед.</li>
                                    <li>✓ Регулярно рассчитывайте ключевые KPI (рентабельность, ликвидность).</li>
                                </ul>
                            </div>
                        </div>
                         <div class="accordion-item border border-slate-200 rounded-lg overflow-hidden">
                            <button class="accordion-header w-full text-left p-4 font-semibold bg-slate-100 hover:bg-slate-200 rounded-t-lg transition-colors duration-300">
                                <span class="step-number">5</span>
                                <span class="flex-1 text-slate-800">Шаг 5: Бюджетирование и контроль (Постоянно)</span>
                                <span class="transform transition-transform duration-300 text-slate-500">▼</span>
                            </button>
                            <div class="accordion-content px-4 pb-4 bg-white">
                               <ul class="list-none text-slate-700 pt-2 space-y-1">
                                    <li>✓ Составьте бюджет на следующий месяц/квартал.</li>
                                    <li>✓ Регулярно проводите план-факт анализ, выявляйте отклонения и корректируйте стратегию.</li>
                                    <li>✓ Сделайте финансовый учет неотъемлемой частью процесса принятия решений.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let ddsChartInstance; // Declare a variable to hold the chart instance

        document.addEventListener('DOMContentLoaded', function() {
            const navButtons = document.querySelectorAll('.nav-button');
            const tabContents = document.querySelectorAll('.tab-content');
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            const kpiCards = document.querySelectorAll('.kpi-card');
            const toggleDatasetButtons = document.querySelectorAll('.toggle-dataset-button');

            function switchTab(targetId) {
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                navButtons.forEach(button => {
                    button.classList.remove('active');
                });
                document.getElementById(targetId).classList.add('active');
                document.querySelector(`[data-target="${targetId}"]`).classList.add('active');
            }

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.dataset.target;
                    switchTab(targetId);
                });
            });
            
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('span:last-child'); // Select the arrow icon
                    const accordionItem = header.closest('.accordion-item'); // Get the parent item
                    
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        icon.style.transform = 'rotate(0deg)';
                        accordionItem.classList.remove('active'); // Remove active class
                    } else {
                        // Close other open accordions
                        document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                        document.querySelectorAll('.accordion-header span:last-child').forEach(i => i.style.transform = 'rotate(0deg)');
                        document.querySelectorAll('.accordion-item').forEach(item => item.classList.remove('active')); // Remove active from all items
                        
                        content.style.maxHeight = content.scrollHeight + "px";
                        icon.style.transform = 'rotate(180deg)';
                        accordionItem.classList.add('active'); // Add active class to current item
                    }
                });
            });

            kpiCards.forEach(card => {
                card.addEventListener('click', () => {
                    const detail = card.querySelector('.kpi-card-detail');
                    if (card.classList.contains('active')) {
                        card.classList.remove('active');
                        detail.style.maxHeight = null;
                    } else {
                        document.querySelectorAll('.kpi-card.active').forEach(activeCard => {
                            activeCard.classList.remove('active');
                            activeCard.querySelector('.kpi-card-detail').style.maxHeight = null;
                        });
                        card.classList.add('active');
                        detail.style.maxHeight = detail.scrollHeight + "px";
                    }
                });
            });

            function createDdsChart() {
                const ctx = document.getElementById('ddsChart').getContext('2d');
                ddsChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн'],
                        datasets: [{
                            label: 'Поступления',
                            data: [1200, 1900, 3000, 2500, 2200, 3000],
                            backgroundColor: 'rgba(34, 197, 94, 0.6)',
                            borderColor: 'rgba(34, 197, 94, 1)',
                            borderWidth: 1
                        }, {
                            label: 'Расходы',
                            data: [800, 900, 1100, 1400, 1300, 1500],
                            backgroundColor: 'rgba(239, 68, 68, 0.6)',
                            borderColor: 'rgba(239, 68, 68, 1)',
                            borderWidth: 1
                        }, {
                            label: 'Чистый денежный поток',
                            data: [400, 1000, 1900, 1100, 900, 1500],
                            type: 'line',
                            borderColor: 'rgba(59, 130, 246, 1)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Пример отчета ДДС за 6 месяцев (в тыс. руб.)'
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                            }
                        },
                    }
                });
            }

            toggleDatasetButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const datasetIndex = parseInt(button.dataset.dataset);
                    const isHidden = ddsChartInstance.isDatasetVisible(datasetIndex);
                    ddsChartInstance.setDatasetVisibility(datasetIndex, !isHidden);
                    ddsChartInstance.update();
                    button.classList.toggle('active', !isHidden);
                });
            });

            function createBalanceChart() {
                const ctx = document.getElementById('balanceChart').getContext('2d');
                 new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Капитал', 'Обязательства'],
                        datasets: [{
                            label: 'Структура пассивов',
                            data: [65, 35],
                            backgroundColor: [
                                'rgba(20, 184, 166, 0.7)',
                                'rgba(245, 158, 11, 0.7)'
                            ],
                            borderColor: [
                                'rgba(15, 118, 110, 1)',
                                'rgba(180, 83, 9, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                         plugins: {
                            legend: {
                                position: 'top',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed !== null) {
                                            label += context.parsed + '%';
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            createDdsChart();
            createBalanceChart();
        });
    </script>
</body>
</html>
